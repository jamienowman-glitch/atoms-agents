---
name: connector-factory
description: Build a new connector contract from scratch by researching official provider scopes and producing a complete scope list plus contract JSON.
metadata:
  short-description: Create connector contracts via official scope research
---
# Connector Factory Skill (Agnostic, UI-Strict)

## Goal
Given a provider name, produce a **complete connector contract JSON** that **exactly matches** the God Config UI schema and can be loaded without interpretation.

## Mandatory Research Rules
1. You **must** use web search to find the **official OAuth scope documentation** for the provider.
2. Prefer official sources (provider developer docs, OAuth guides, API reference).
3. If multiple scope lists exist (v1/v2, legacy vs current), list **all** scopes and annotate version/source.
4. If the provider has no scopes (API key only), explicitly state that and document the official auth method.

## Output Requirements (Strict)
1. **Produce a single JSON file** that is a copy of:
   - `/Users/jaynowman/dev/atoms-core/docs/contracts/connector_factory/CONNECTOR_CONTRACT_TEMPLATE.json`
2. **Fill only the existing fields** in that template. Do not add new keys.
3. **Scopes**:
   - Must list **every official scope** in `sections.scopes.scopes[]`.
   - Each scope entry must include: `scope_name`, `scope_type`, `description`, `requires_firearm`, `firearm_type_id`.
   - **Firearms rule:** set `requires_firearm` to `false` and leave `firearm_type_id` empty for every scope. The agent must **not** decide firearms. The human approves in UI.
4. **Firearms Gate**:
   - Only `requires_firearm` + `firearm_type_id` allowed. No danger/risk fields.
5. **No DB Seeding**:
   - The scope checklist is **reference only**; do not import it into the DB.
6. **Draft-Only**:
   - Contract status must remain `draft` until the human approves in the UI.
7. **Default Pre-Population**:
   - Pre-fill sensible defaults for UTM and BYOK only. Leave KPI mappings, budgets, and firearm fields unapproved/blank.

## Steps (Non-Optional)
1. Ask for the provider name if missing.
2. Find **official OAuth scope docs** (primary sources only).
3. Extract **all scopes** with descriptions.
4. Populate the contract JSON template (draft status).
5. Save to:
   - `/Users/jaynowman/dev/atoms-core/docs/contracts/connector_factory/{PROVIDER}_CONNECTOR_CONTRACT.json`
6. Return:
   - The **full scope list** (verbatim)
   - The **exact file path**
   - The **source URLs**

## Contract Fields to Fill (Exact Paths)
- `provider_slug`
- `display_name`
- `sections.scopes.scopes[]` entries
- `sections.utm.schema`
- `sections.byok`

## Naming + Vault Key Rules (Locked)
- Use naming rule: `PROVIDER_{PLATFORM}_KEY`
- `{PLATFORM}` = slugified provider name (uppercase, underscores).
- The agent must **only** provide the name/slug; key naming is generated by the naming engine and stored via UI.

## Non-Negotiable Laws
- Firearms are the only gate.
- No danger levels, risk scores, allow-lists, or parallel gating fields.
- Use the naming rule `PROVIDER_{PLATFORM}_KEY`.

## Example Prompt
“Create a connector contract for TikTok. Find every official OAuth scope and list them. Output the completed contract JSON in the standard path.”
