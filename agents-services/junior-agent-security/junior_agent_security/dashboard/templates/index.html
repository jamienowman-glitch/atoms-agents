<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Junior Agent Security</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'JetBrains Mono', monospace;
        }
    </style>
</head>

<body class="bg-black text-green-500 min-h-screen p-8">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <header class="flex justify-between items-end border-b border-green-800 pb-4 mb-8">
            <div>
                <h1 class="text-4xl font-bold text-white mb-2">Junior Agent Security</h1>
                <p class="text-sm opacity-70">The Adult in the Room for AI Agents</p>
            </div>
            <div class="text-right">
                <div class="text-xs uppercase tracking-widest text-green-700">Vault Status</div>
                <div class="text-2xl font-bold">{{ keys_count }} Keys Secured</div>
            </div>
        </header>

        <!-- Active Grants -->
        <section class="mb-12">
            <h2 class="text-xl font-bold text-white mb-4 uppercase flex items-center gap-2">
                <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                Active Firearms Licenses
            </h2>

            {% if grants %}
            <div class="grid gap-4">
                {% for grant in grants %}
                <div class="border border-green-900 bg-green-900/10 p-4 rounded flex justify-between items-center">
                    <div>
                        <div class="font-bold text-white">{{ grant.license_key }}</div>
                        <div class="text-xs opacity-70">Agent: {{ grant.agent_id }}</div>
                    </div>
                    <div class="text-right">
                        <div class="text-xs font-mono">{{ grant.expires_at }}</div>
                        <div class="text-[10px] text-green-700">HASH: {{ grant.merkle_hash[:12] }}...</div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-center py-8 border border-dashed border-green-900 text-green-800">
                No active grants. Agents are locked out.
            </div>
            {% endif %}
        </section>

        <!-- Audit Log -->
        <section>
            <h2 class="text-xl font-bold text-white mb-4 uppercase">Merkle Audit Log</h2>
            <div class="overflow-x-auto">
                <table class="w-full text-left text-sm">
                    <thead class="text-green-700 border-b border-green-900">
                        <tr>
                            <th class="py-2">Time</th>
                            <th class="py-2">Action</th>
                            <th class="py-2">Platform</th>
                            <th class="py-2">Merkle Hash</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-green-900/30">
                        {% for log in logs %}
                        <tr class="hover:bg-green-900/5 transition-colors">
                            <td class="py-3 opacity-70">{{ log.created_at }}</td>
                            <td class="py-3 font-bold text-white">{{ log.license_key }}</td>
                            <td class="py-3">{{ log.granted_by }}</td>
                            <td class="py-3 font-mono text-xs opacity-50">{{ log.merkle_hash }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>

        <footer class="mt-16 text-center text-xs text-green-900 border-t border-green-900 pt-8">
            JAS v1.0.0 • Local Sidecar • Zero Trust Architecture
        </footer>
    </div>
</body>

</html>